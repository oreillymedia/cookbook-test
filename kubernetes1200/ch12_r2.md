## Problem

You have a well-defined service (see [\[simple\_service\]](#simple_service)) backed by several pods. But one of the pods is misbehaving, and you would like to take it out of the list of endpoints to examine it at a later time.

## Solution

Relabel the pod using the `--overwrite` option—​this will allow you to change the value of the run label on the pod. By overwriting this label, you can ensure that it will not be selected by the service selector ([\[simple\_service\]](#simple_service)) and will be removed from the list of endpoints. At the same time, the replica set watching over your pods will see that a pod has disappeared and will start a new replica.

To see this in action, start with a straightforward deployment generated with `kubectl run` (see [\[deployments\]](#deployments)):

$ **kubectl run nginx --image nginx --replicas 4**

When you list the pods and show the label with key `run`, you’ll see four pods with the value `nginx` (`run=nginx` is the label that is automatically generated by the `kubectl run` command):

$ **kubectl get pods -Lrun**
NAME                     READY     STATUS            RESTARTS   AGE       RUN
nginx-d5dc44cf7-5g45r    1/1       Running           0          1h        nginx
nginx-d5dc44cf7-l429b    1/1       Running           0          1h        nginx
nginx-d5dc44cf7-pvrfh    1/1       Running           0          1h        nginx
nginx-d5dc44cf7-vm764    1/1       Running           0          1h        nginx

You can then expose this deployment with a service and check the endpoints, which correspond to the IP addresses of each pod:

$ **kubectl expose deployments nginx --port 80**

$ **kubectl get endpoints**
NAME         ENDPOINTS                                                 AGE
nginx        172.17.0.11:80,172.17.0.14:80,172.17.0.3:80 + 1 more...   1h

Moving the first pod out of the service traffic via relabeling is done with a single command:

$ **kubectl label pods nginx-d5dc44cf7-5g45r run=notworking --overwrite**

Tip

To find the IP address of a pod, you can list the pod’s manifest in JSON and run a JQuery query:

$ **kubectl get pods nginx-d5dc44cf7-5g45r -o json | \\
  jq -r .status.podIP172.17.0.3**

You will see a brand new pod appear with the label `run=nginx`, and you will see that your nonworking pod still exists but no longer appears in the list of service endpoints:

$ **kubectl get pods -Lrun**
NAME                     READY     STATUS        RESTARTS   AGE       RUN
nginx-d5dc44cf7-5g45r    1/1       Running       0          21h       notworking
nginx-d5dc44cf7-hztlw    1/1       Running       0          21s       nginx
nginx-d5dc44cf7-l429b    1/1       Running       0          5m        nginx
nginx-d5dc44cf7-pvrfh    1/1       Running       0          5m        nginx
nginx-d5dc44cf7-vm764    1/1       Running       0          5m        nginx

$ **kubectl describe endpoints nginx**
Name:         nginx
Namespace:    default
Labels:       run=nginx
Annotations:  <none>
Subsets:
  Addresses:          172.17.0.11,172.17.0.14,172.17.0.19,172.17.0.7
...